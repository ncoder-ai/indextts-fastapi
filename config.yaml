# IndexTTS FastAPI Configuration
# This file contains default configuration values.
# Environment variables will override values in this file.

model:
  cfg_path: "checkpoints/config.yaml"
  model_dir: "checkpoints"
  # Performance settings optimized for NVIDIA GPU
  use_fp16: true              # Reduces VRAM usage and increases inference speed
  use_cuda_kernel: true        # Provides 1.3-1.5x speedup with custom CUDA kernels
  use_deepspeed: true          # Optimization acceleration
  use_accel: true              # Enables flash-attention (installed by setup.sh, auto-disabled if unavailable)
  use_torch_compile: true      # PyTorch 2.0+ compilation optimization

auto_download:
  enabled: true
  hf_repo: "IndexTeam/IndexTTS-2"

voice:
  voice_dir: "examples"
  default_voice: "alloy"

server:
  host: "0.0.0.0"
  port: 9877

generation:
  # Generation parameters for TTS synthesis
  max_text_tokens_per_segment: 120    # Max tokens per text segment
  max_mel_tokens: 3000                 # Maximum mel tokens (increased from 1500 to handle longer texts)
  do_sample: true                     # Enable sampling
  top_p: 0.8                          # Top-p sampling parameter
  top_k: 30                           # Top-k sampling parameter
  temperature: 0.8                    # Sampling temperature
  num_beams: 3                        # Number of beams for beam search
  repetition_penalty: 10.0            # Repetition penalty
  length_penalty: 0.0                  # Length penalty
  interval_silence: 200               # Silence interval between segments (ms)
